# Game-Shiru アプリ構成 フォルダ概要

## 1. プロジェクト全体構成

Game-Shiruは、以下のフォルダ構成で組織されたウェブアプリケーションです：

```
game-app_ver2/
├── app.py                      # メインアプリケーション
├── requirements.txt            # Python依存関係
├── README.md                   # プロジェクト説明
├── ER図.png                    # データベースER図
├── システム構成図.png           # システムアーキテクチャ図
├── backend/                    # バックエンドモジュール
├── db/                         # データベース関連
├── docs/                       # ドキュメント
├── static/                     # 静的ファイル
├── templates/                  # HTMLテンプレート
└── data/                       # データファイル
```

## 2. フォルダ詳細説明

### 2.1 ルートディレクトリ

**主要ファイル：**

- **app.py** - Flaskアプリケーションのメインファイル
  - ルーティング定義
  - ビジネスロジック
  - 管理者認証機能
  - ファイルアップロード処理

- **requirements.txt** - Pythonパッケージ依存関係
  - Flaskウェブフレームワーク
  - SQLiteデータベース接続
  - その他必要ライブラリ

- **README.md** - プロジェクト説明書
  - システム概要
  - インストール方法
  - 使用方法

**画像ファイル：**
- **ER図.png** - データベースエンティティ関係図
- **システム構成図.png** - システムアーキテクチャ図

### 2.2 backend/ フォルダ

データアクセス層の実装が含まれています：

```
backend/
├── db_manager.py          # データベース接続管理
└── game_dao.py            # ゲームデータアクセスオブジェクト
```

**db_manager.py** - データベース接続管理
- SQLite接続処理
- トランザクション管理
- SQLクエリ実行
- 接続プーリング

**game_dao.py** - ゲームデータアクセスオブジェクト
- CRUD操作（作成、読み取り、更新、削除）
- 検索機能
- フィルタリング機能
- データ整合性管理

### 2.3 db/ フォルダ

データベース関連ファイルが含まれています：

```
db/
├── games.db               # SQLiteデータベースファイル
├── init_db.py             # データベース初期化スクリプト
├── schema.sql             # データベーススキーマ定義
└── test_db.py             # データベーステスト
```

**games.db** - SQLiteデータベース
- 7つのテーブルで構成
- 第3正規形に正規化
- 外部キー制約付き

**schema.sql** - データベーススキーマ
- テーブル定義
- インデックス定義
- 外部キー制約
- データ整合性ルール

**init_db.py** - 初期化スクリプト
- データベース作成
- テーブル作成
- 初期データ投入

### 2.4 docs/ フォルダ

プロジェクトドキュメントが含まれています：

```
docs/
├── architecture.pu        # システムアーキテクチャ（PlantUML）
├── architecture_jp.pu     # システムアーキテクチャ（日本語）
├── schema.pu              # データベーススキーマ（PlantUML）
└── schema_jp.pu           # データベーススキーマ（日本語）
```

**architecture.pu** - システムアーキテクチャ図
- 英語版アーキテクチャ図
- PlantUML形式

**architecture_jp.pu** - 日本語版アーキテクチャ図
- 日本語ラベル付き
- プレゼンテーション用

**schema.pu** - データベーススキーマ
- 英語版ER図
- テーブル関係図

**schema_jp.pu** - 日本語版データベーススキーマ
- 日本語ラベル付き
- プレゼンテーション用

### 2.5 static/ フォルダ

静的ファイルが含まれています：

```
static/
├── style.css              # CSSスタイルシート
├── images/                # 画像ファイル
│   ├── game_*.jpg         # ゲーム画像
│   ├── no_image.png       # デフォルト画像
│   └── game_covers/       # ゲームカバー画像
└── uploads/               # アップロード画像
```

**style.css** - CSSスタイルシート
- レスポンシブデザイン
- カラースキーム
- レイアウト定義
- モバイル対応

**images/** - 画像ファイル
- ゲーム画像（100+ファイル）
- デフォルト画像
- カバー画像

**uploads/** - アップロード画像
- 管理者がアップロードした画像
- ユニークファイル名
- 自動生成ファイル

### 2.6 templates/ フォルダ

HTMLテンプレートが含まれています：

```
templates/
├── base.html              # ベーステンプレート
├── index.html             # ホームページ
├── detail.html            # ゲーム詳細ページ
├── add.html               # ゲーム追加ページ
└── edit.html              # ゲーム編集ページ
```

**base.html** - ベーステンプレート
- 共通ヘッダー
- ナビゲーション
- フッター
- JavaScriptライブラリ

**index.html** - ホームページ
- ゲーム一覧表示
- 検索機能
- フィルタリング機能
- ソート機能

**detail.html** - ゲーム詳細ページ
- ゲーム詳細情報
- 画像表示
- タグ表示
- 関連情報

**add.html** - ゲーム追加ページ
- フォーム入力
- 画像アップロード
- バリデーション
- 管理者機能

**edit.html** - ゲーム編集ページ
- データ編集
- 画像更新
- バリデーション
- 管理者機能

### 2.7 data/ フォルダ

データファイルが含まれています：

```
data/
└── games.json             # ゲームデータ（JSON形式）
```

**games.json** - ゲームデータ
- 初期データセット
- JSON形式
- インポート用データ

## 3. アプリケーション構成

### 3.1 フロントエンド構成

**技術スタック：**
- HTML5
- CSS3
- JavaScript
- Jinja2テンプレートエンジン

**主要機能：**
- ゲーム検索インターフェース
- 詳細表示機能
- 管理者認証
- レスポンシブデザイン

**外部ライブラリ：**
- Google Fonts（Noto Sans JP）
- Cropper.js（画像編集）

### 3.2 バックエンド構成

**技術スタック：**
- Python 3.x
- Flaskウェブフレームワーク
- SQLiteデータベース
- SQLAlchemy ORM

**主要機能：**
- HTTPリクエスト処理
- ビジネスロジック実行
- データベースアクセス
- セッション管理

**設計パターン：**
- MVCアーキテクチャ
- DAOデザインパターン
- レイヤードアーキテクチャ

### 3.3 データベース構成

**技術スタック：**
- SQLite 3.x
- SQLAlchemy ORM
- Python DB-API

**データベース設計：**
- 第3正規形（3NF）
- 7つのテーブル
- 外部キー制約
- インデックス最適化

**主要テーブル：**
- games（ゲーム情報）
- developers（開発者情報）
- genres（ジャンル情報）
- platforms（プラットフォーム情報）
- preferences（タグ情報）
- game_platforms（接続テーブル）
- game_tags（接続テーブル）

## 4. 開発環境

### 4.1 必要条件

- Python 3.7+
- Flask 2.0+
- SQLite 3.0+
- Java 8+（PlantUML生成用）

### 4.2 インストール方法

```bash
# 依存関係インストール
pip install -r requirements.txt

# データベース初期化
python db/init_db.py

# アプリケーション起動
python app.py
```

### 4.3 実行方法

```bash
# 開発モードで起動
python app.py

# 本番モードで起動
flask run --host=0.0.0.0 --port=5000
```

## 5. デプロイメント

### 5.1 環境変数

- `FLASK_ENV`: 環境（development/production）
- `DATABASE_URL`: データベース接続URL
- `SECRET_KEY`: セッション秘密鍵

### 5.2 デプロイメント手順

1. 依存関係インストール
2. データベース初期化
3. 静的ファイル配置
4. アプリケーション起動
5. リバースプロキシ設定

### 5.3 スケーリング

- 水平スケーリング（複数インスタンス）
- データベースレプリカ
- キャッシュサーバー（Redis）
- CDN統合

## 6. テスト

### 6.1 テストファイル

- `test_backend.py` - バックエンドテスト
- `db/test_db.py` - データベーステスト

### 6.2 テスト実行

```bash
# バックエンドテスト
python test_backend.py

# データベーステスト
python db/test_db.py
```

## 7. 保守管理

### 7.1 バックアップ

- データベースバックアップ
- 静的ファイルバックアップ
- コードリポジトリ管理

### 7.2 モニタリング

- アクセスログ
- エラーログ
- パフォーマンスモニタリング

### 7.3 更新手順

1. コード更新
2. データベースマイグレーション
3. 静的ファイル更新
4. サービス再起動

## 8. セキュリティ

### 8.1 セキュリティ対策

- 管理者認証
- セッション管理
- SQLインジェクション防止
- ファイルアップロード検証

### 8.2 ベストプラクティス

- 定期的なパスワード変更
- アクセス制御
- ログ監視
- 定期的なセキュリティ更新

## 9. パフォーマンス最適化

### 9.1 最適化手法

- データベースインデックス
- クエリ最適化
- キャッシュ利用
- 静的ファイル最適化

### 9.2 モニタリング

- パフォーマンスメトリクス
- ボトルネック分析
- リソース使用率監視

## 10. 今後の展開

### 10.1 機能拡張計画

- ユーザー認証機能
- レビューシステム
- レコメンデーションエンジン
- ソーシャル共有機能

### 10.2 技術改善計画

- マイクロサービス化
- コンテナ化（Docker）
- CI/CDパイプライン
- クラウドデプロイメント

---

このドキュメントは、Game-Shiruアプリケーションのフォルダ構成とアプリケーション構成について詳細に説明しています。開発、保守、運用に役立つ情報が含まれています。
